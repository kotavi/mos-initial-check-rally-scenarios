{% set image_name = image_name or "^cirros.*-disk$" %}
{% set public_net = neutron_floating_network or "public" %}
---
  HeatStacks.create_and_delete_stack:
    -
      args:
        template_path: "heat/templates/default.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

   # create-and-delete-stack-with-delay
    -
      args:
        template_path: "heat/templates/resource-group-with-constraint.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-and-delete-stack-with-neutron
    -
      args:
        template_path: "heat/templates/server-with-ports.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-and-delete-stack-with-volume
    -
      args:
        template_path: "heat/templates/server-with-volume.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-and-delete-stack-resource-group
    -
      args:
        template_path: "heat/templates/resource-group-server-with-volume.yaml.template"
        parameters:
           num_instances: {{num_instances_in_stack}}
        files: ["heat/templates/server-with-volume.yaml.template"]
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_and_list_stack:
    -
      args:
        template_path: "heat/templates/default.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}


  HeatStacks.create_check_delete_stack:
    -
      args:
        template_path: "heat/templates/random-strings.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}


  HeatStacks.create_snapshot_restore_delete_stack:
    -
      args:
        template_path: "heat/templates/random-strings.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_stack_and_list_output:
    -
      args:
        template_path: "heat/templates/resource-group-with-outputs.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_stack_and_list_output_via_API:
    -
      args:
        template_path: "heat/templates/resource-group-with-outputs.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_stack_and_scale:
    -
      args:
        template_path: "heat/templates/autoscaling-group.yaml.template"
        output_key: "scaling_url"
        delta: {{stack_change_by_delta}}
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}


  HeatStacks.create_stack_and_show_output:
    -
      args:
        template_path: "heat/templates/resource-group-with-outputs.yaml.template"
        output_key: "val1"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_stack_and_show_output_via_API:
    -
      args:
        template_path: "heat/templates/resource-group-with-outputs.yaml.template"
        output_key: "val1"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_suspend_resume_delete_stack:
    -
      args:
        template_path: "heat/templates/random-strings.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.create_update_delete_stack:
  # create-update-delete-stack-add-res
    -
      args:
        template_path: "heat/templates/random-strings.yaml.template"
        updated_template_path: "heat/templates/updated-random-strings-add.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-update-delete-stack-del-res
    -
      args:
        template_path: "heat/templates/random-strings.yaml.template"
        updated_template_path: "heat/templates/updated-random-strings-delete.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-update-delete-stack-increase
    -
      args:
        template_path: "heat/templates/resource-group.yaml.template"
        updated_template_path: "heat/templates/updated-resource-group-increase.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-update-delete-stack-inplace
    -
      args:
        template_path: "heat/templates/autoscaling-policy.yaml.template"
        updated_template_path: "heat/templates/updated-autoscaling-policy-inplace.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-update-delete-stack-reduce
    -
      args:
        template_path: "heat/templates/resource-group.yaml.template"
        updated_template_path: "heat/templates/updated-resource-group-reduce.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  # create-update-delete-stack-replace
    -
      args:
        template_path: "heat/templates/random-strings.yaml.template"
        updated_template_path: "heat/templates/updated-random-strings-replace.yaml.template"
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}

  HeatStacks.list_stacks_and_events:
    -
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}
        stacks:
          stacks_per_tenant: {{stacks_per_tenant_before_benchmarking}}
          resources_per_stack: {{resources_per_stack_before_benchmarking}}


  HeatStacks.list_stacks_and_resources:
    -
      runner:
        type: "constant"
        times: {{run_N_times}}
        concurrency: {{number_of_concurrent_scenarios}}
      context:
        users:
          tenants: {{number_of_tenants}}
          users_per_tenant: {{users_per_tenant}}
        stacks:
          stacks_per_tenant: {{stacks_per_tenant_before_benchmarking}}
          resources_per_stack: {{resources_per_stack_before_benchmarking}}

